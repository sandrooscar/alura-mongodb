*** AULA01
* Setando diretorio db para o mongo server:

mongod --dbpath C:\PESSOAL\dev\alura2020\CursoMongoDB\db

* No cliente mongo: 

** Criando uma coleção ("tabela")
db.createCollection("alunos")

** Inserindo dados
{
	"nome": "Felipe",
	"data_nascimento": new Date(1994,02,26)
}

db.alunos.insert(
{
	"nome": "Felipe",
	"data_nascimento": new Date(1994,02,26)
}
)

** Inserindo mais dados  atributos
{
	"nome": "Felipe",
	"data_nascimento": new Date(1994,02,26),
	"curso": {
			"nome": "Sistemas de informação"
		},
	"notas": [10.0, 9.0, 4.5],
	"habilidades":[
		{
			"nome": "Inglês",
			"nível": "avançado"
		},
		{
			"nome": "taekwondo",
			"nível": "básico"
		}
	] 
}

** find básico
db.alunos.find()

** removendo objetos
db.alunos.remove(
{
	"_id": ObjectId("5e769d89cace9db69379132c")
}
)

** inserindo mais dados
As aspas são opcionais, ppor que usa-las? quando temos algum caracter especial na chave que gostariamos de considerar

db.alunos.insert(
{
	"nome": "Julio",
	"data_nascimento": new Date(1972,08,30),
	"curso": {
		"nome": "Medicina"
	},
	"Habilidades":[
		{
			"nome": "inglês",
			"nível": "avançado"
		}
	]
}
)

db.alunos.insert(
{
	nome: "Alberto",
	data_nascimento: new Date(1972,09,30),
	curso:{
		nome: "Engenharia Química"
	},
	habilidades: [
		{
			nome: "inglês",
			nível: "intermediário"
		}
	]
}
)

db.alunos.insert(
{
	nome: "Daniela",
	data_nascimento: new Date(1995, 09, 30),
	curso: {
		nome: "Moda"
	},
	habilidades: [
		{
			nome: "alemão",
			nível: "básico"
		}
	]
}
)

db.alunos.insert(
{
	nome: "Paulo",
	data_nascimento: new Date(1979, 12, 31),
	curso: {
		nome: "Ciências da Computação"
	},
	notas: [10, 9, 7],
	habilidades: [
		{
			nome: "Inglês",
			nível: "Avançado"
		},
		{
			nome: "Francês",
			nível: "Avançado"
		}

	]
}
)

** Como ficaria no banco relacional

create table cursos(
	id integer primary key auto_increment,
	nome varchar(255)
);

create table alunos (
	id integer primary key auto_increment,
	nome varchar(255), 
	curso_id integer, data_nascimento date

);

create table notas (
	id integer primary key auto_increment,
	nota decimal(3,2),
	aluno_id integer
);

create table habilidades (
	id integer primary key auto_increment,
	nome varchar(255),
	nivel varchar(255),
	aluno_id integer
);

** Vantagem e Desvantagem
Uma situação onde o MongoDB é bastante usado é quando precisamos realizar buscas por proximidade, como, por exemplo, localizar a pizzaria mais próxima de você.

Situações onde o uso do MongoDB não é indicado são cenários onde precisamos fazer muitas operações de agregação em uma única query, isso tem muito custo para o MongoDB.

*** AULA02 - Filtros

Formatação legivel:

db.alunos.find().pretty()

Pesquisa:
A maneira mais simples de pesquisar é passando um objeto de exemplo do que queremos procurar:

db.alunos.find(
{
	nome: "Felipe"
}
).pretty()


** Inserindo novo aluno com mesmo nome: 
Cada elemento pode ter uma estrutura diferente da outra.

db.alunos.insert(
{
        "nome" : "Felipe",
        "curso" : {
                "nome" : "Matemática"
        }
}
)

** Buscando por habilidades

Todos os alunos com habilidade Inglês

db.alunos.find(
{
	"habilidades.nome":"Inglês"
}
).pretty()

** Buscando por curso e habilidade

Todos os alunos de Ciências da Computação com habilidade Inglês
A consulta utiliza um objeto do javaScript

db.alunos.find(
{
	"curso.nome": "Ciências da Computação",
	"habilidades.nome":"Inglês"
}
).pretty()

O find sempre traz todos os campos do documento

** Operadores lógicos
* $or
db.alunos.find(
{
	$or : [
		{"curso.nome": "Sistemas de informação"},
		{"curso.nome": "Engenharia Química"}
	      ]
}
)

* tenhas as duas condições e o nome seja Daniela
db.alunos.find(
{
	$or : [
		{"curso.nome": "Sistemas de informação"},
		{"curso.nome": "Engenharia Química"}
	      ],
	"nome": "Daniela"
}
)

A Daniela esta no curso de moda
db.alunos.find(
{
	$or : [
		{"curso.nome": "Sistemas de informação"},
		{"curso.nome": "Engenharia Química"},
		{"curso.nome": "Moda"}
	      ],
	"nome": "Daniela"
}
)

* $in
db.alunos.find(
{
	"curso.nome": { $in : ["Sistemas de informação", "Engenharia Química", "Moda"]},
	nome: "Daniela"
}
)




